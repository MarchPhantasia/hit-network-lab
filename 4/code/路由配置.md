### 1. 启用虚拟机的IP转发功能

在Linux系统中，可以通过以下命令启用IP转发：

```bash
sudo sysctl -w net.ipv4.ip_forward=1
```

为了让设置在重启后仍然生效，可以编辑 `/etc/sysctl.conf` 文件，找到或添加以下行：

```plaintext
net.ipv4.ip_forward = 1
```

然后应用配置：

```bash
sudo sysctl -p
```

### 2. 配置静态路由

假设网络拓扑如下：

- 虚拟机有两个网卡：
  - 网卡1：IP地址 `192.168.1.1`，连接到网络 `192.168.1.0/24`
  - 网卡2：IP地址 `192.168.2.1`，连接到网络 `192.168.2.0/24`
- 主机1：`192.168.1.2`，网关设置为 `192.168.1.1`
- 主机2：`192.168.2.2`，网关设置为 `192.168.2.1`

在这种情况下，只要确保两台主机的默认网关正确设置为虚拟机对应网段的IP地址，即：

- 主机 `192.168.1.2` 的默认网关应为 `192.168.1.1`
- 主机 `192.168.2.2` 的默认网关应为 `192.168.2.1`

### 3. 检查防火墙配置

为了确保数据包能够在两个网段间转发，需要检查防火墙配置，确认未阻止数据包转发。如果使用 `iptables`，可以添加以下规则来允许转发：

```bash
sudo iptables -A FORWARD -i enp0s3 -o enp0s8 -j ACCEPT
sudo iptables -A FORWARD -i enp0s8 -o enp0s3 -j ACCEPT
```

> 注意：在以上命令中，`eth0` 和 `eth1` 分别表示虚拟机的两个网卡接口名称，请根据实际接口名称替换。

如果需要持久化此配置，使用以下命令保存：

```bash
sudo iptables-save > /etc/iptables/rules.v4
```
