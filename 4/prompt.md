我正在做计算机网络相关的实验,我要实现的实验是基于双网口主机的路由转发。
当前我有三台虚拟主机，其中一台作为路由使用，另外两台作为客户端使用。
客户端1运行send.c代码，路由运行route.c代码，客户端2运行recv.c代码。
客户端1的IP为`192.168.1.2`，需要将数据包发送到客户端2的IP为`192.168.2.2`上，而路由主机含有两个虚拟网卡`enp0s3`和`enp0s8`，分别在IP `192.168.1.1`和IP `192.168.2.1`上，客户端1的网关设置为 `192.168.1.1`，客户端2的网关设置为`192.168.2.1`，我已经使用`iptables`设置了两个网卡之间的消息转发。
我需要你完成下列任务，并且直接给出最终的代码
- 完善发送、中转、接受程序，使得能够完整实验流程。
- 改进程序，通过完善路由表，改进程序实现双向传输。
- 打印程序运行过程，尤其是展示收到的数据报的源MAC地址，目的MAC地址、源IP地址、目的IP地址、ttl、源端口号、目的端口号。